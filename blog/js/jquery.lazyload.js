!function(f,o,n,l){var h=f(o);f.fn.lazyload=function(t){var e,i=this,a={threshold:0,failure_limit:0,event:"scroll",effect:"show",container:o,data_attribute:"original",skip_invisible:!1,appear:null,load:null,placeholder:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC"};function r(){var e=0;i.each(function(){var t=f(this);if((!a.skip_invisible||t.is(":visible"))&&!f.abovethetop(this,a)&&!f.leftofbegin(this,a))if(f.belowthefold(this,a)||f.rightoffold(this,a)){if(++e>a.failure_limit)return!1}else t.trigger("appear"),e=0})}return t&&(l!==t.failurelimit&&(t.failure_limit=t.failurelimit,delete t.failurelimit),l!==t.effectspeed&&(t.effect_speed=t.effectspeed,delete t.effectspeed),f.extend(a,t)),e=a.container===l||a.container===o?h:f(a.container),0===a.event.indexOf("scroll")&&e.bind(a.event,r),this.each(function(){var o=this,n=f(o);o.loaded=!1,n.attr("src")!==l&&!1!==n.attr("src")||n.is("img")&&n.attr("src",a.placeholder),n.one("appear",function(){var t;this.loaded||(a.appear&&(t=i.length,a.appear.call(o,t,a)),f("<img />").bind("load",function(){var t=n.attr("data-"+a.data_attribute);n.hide(),n.is("img")?n.attr("src",t):n.css("background-image","url('"+t+"')"),n[a.effect](a.effect_speed),o.loaded=!0;var e,r=f.grep(i,function(t){return!t.loaded});i=f(r),a.load&&(e=i.length,a.load.call(o,e,a))}).attr("src",n.attr("data-"+a.data_attribute)).on("error",function(){n.attr("src",n.attr("errorImg")),n.attr("alt",n.attr("alt")+" - 图像加载失败");var t=n.parent("a.fancybox").attr("SecondHref");n.parent("a.fancybox").attr("href",t)}))}),0!==a.event.indexOf("scroll")&&n.bind(a.event,function(){o.loaded||n.trigger("appear")})}),h.bind("resize",function(){r()}),/(?:iphone|ipod|ipad).*os 5/gi.test(navigator.appVersion)&&h.bind("pageshow",function(t){t.originalEvent&&t.originalEvent.persisted&&i.each(function(){f(this).trigger("appear")})}),f(n).ready(function(){r()}),this},f.belowthefold=function(t,e){var r=e.container===l||e.container===o?(o.innerHeight?o.innerHeight:h.height())+h.scrollTop():f(e.container).offset().top+f(e.container).height();return r<=f(t).offset().top-e.threshold},f.rightoffold=function(t,e){var r=e.container===l||e.container===o?h.width()+h.scrollLeft():f(e.container).offset().left+f(e.container).width();return r<=f(t).offset().left-e.threshold},f.abovethetop=function(t,e){var r=e.container===l||e.container===o?h.scrollTop():f(e.container).offset().top;return r>=f(t).offset().top+e.threshold+f(t).height()},f.leftofbegin=function(t,e){var r=e.container===l||e.container===o?h.scrollLeft():f(e.container).offset().left;return r>=f(t).offset().left+e.threshold+f(t).width()},f.inviewport=function(t,e){return!(f.rightoffold(t,e)||f.leftofbegin(t,e)||f.belowthefold(t,e)||f.abovethetop(t,e))},f.extend(f.expr[":"],{"below-the-fold":function(t){return f.belowthefold(t,{threshold:0})},"above-the-top":function(t){return!f.belowthefold(t,{threshold:0})},"right-of-screen":function(t){return f.rightoffold(t,{threshold:0})},"left-of-screen":function(t){return!f.rightoffold(t,{threshold:0})},"in-viewport":function(t){return f.inviewport(t,{threshold:0})},"above-the-fold":function(t){return!f.belowthefold(t,{threshold:0})},"right-of-fold":function(t){return f.rightoffold(t,{threshold:0})},"left-of-fold":function(t){return!f.rightoffold(t,{threshold:0})}})}(jQuery,window,document);