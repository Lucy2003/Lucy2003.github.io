var searchFunc=function(e,r,s){"use strict";$.ajax({url:e,dataType:"xml",success:function(e){var t=$("entry",e).map(function(){return{title:$("title",this).text(),content:$("content",this).text(),url:$("url",this).text()}}).get(),e=document.getElementById(r),n=document.getElementById(s);e.addEventListener("input",function(){var u='<ul style="overflow-y:auto; overflow-x:hidden;" id="result_ul" class="search-result-list">',h=this.value.trim().toLowerCase().split(/[\s\-]+/);n.innerHTML="",this.value.trim().length<=0||(t.forEach(function(e){var n,t,r,s=!0,l=e.title.trim().toLowerCase(),o=e.content.trim().replace(/<[^>]+>/g,"").toLowerCase(),a=e.url,c=-1,i=-1;""!=l&&""!=o&&h.forEach(function(e,t){n=l.indexOf(e),c=o.indexOf(e),n<0&&c<0?s=!1:(c<0&&(c=0),0==t&&(i=c))}),s&&(u+="<li><a href='"+a+"' class='search-result-title' target='_blank'>> "+l+"</a>",t=e.content.trim().replace(/<[^>]+>/g,""),0<=i&&(a=i+6,(e=i-6)<0&&(e=0),0==e&&(a=10),a>t.length&&(a=t.length),r=t.substr(e,a),h.forEach(function(e){var t=new RegExp(e,"gi");r=r.replace(t,"<em style='font-size:20px;font-weight:600;color:#000000' class=\"search-keyword\">"+e+"</em>")}),u+='<p class="search-result">'+r+"...</p>"))}),n.innerHTML=u,recall())})}})};function Search(){var e=document.getElementById("PopupBox"),t=document.getElementById("PopupLayer");searching=0==searching?("true"==$("#main-menu-navbar").attr("aria-expanded")&&$("#navbutton").trigger("click"),$("html,body").css("overflow","hidden").css("height","100%"),document.body.addEventListener("touchmove",self.welcomeShowedListener,!1),e.style.display="block",t.style.display="block",1):(e.style.display="none",t.style.display="none",$("html,body").css("overflow","").css("height",""),document.body.removeEventListener("touchmove",self.welcomeShowedListener,!1),0)}searchFunc(path,"local-search-input","local-search-result");