var searchFunc=function(e,s,l){"use strict";$.ajax({url:e,dataType:"xml",success:function(e){var t=$("entry",e).map(function(){return{title:$("title",this).text(),content:$("content",this).text(),url:$("url",this).text()}}).get(),n=document.getElementById(s),r=document.getElementById(l);n.addEventListener("input",function(){var d='<ul style="overflow-y:auto; overflow-x:hidden;" id="result_ul" class="search-result-list">',m=this.value.trim().toLowerCase().split(/[\s\-]+/);r.innerHTML="",this.value.trim().length<=0||(t.forEach(function(e){var n,t,r,s,l,o=!0,a=e.title.trim().toLowerCase(),c=e.content.trim().replace(/<[^>]+>/g,"").toLowerCase(),i=e.url,u=-1,h=-1;""!=a&&""!=c&&m.forEach(function(e,t){n=a.indexOf(e),u=c.indexOf(e),n<0&&u<0?o=!1:(u<0&&(u=0),0==t&&(h=u))}),o&&(d+="<li><a href='"+i+"' class='search-result-title' target='_blank'>> "+a+"</a>",t=e.content.trim().replace(/<[^>]+>/g,""),0<=h&&(s=h+6,(r=h-6)<0&&(r=0),0==r&&(s=10),s>t.length&&(s=t.length),l=t.substr(r,s),m.forEach(function(e){var t=new RegExp(e,"gi");l=l.replace(t,"<em style='font-size:20px;font-weight:600;color:#000000' class=\"search-keyword\">"+e+"</em>")}),d+='<p class="search-result">'+l+"...</p>"))}),r.innerHTML=d,recall())})}})};function Search(){var e=document.getElementById("PopupBox"),t=document.getElementById("PopupLayer");searching=0==searching?("true"==$("#main-menu-navbar").attr("aria-expanded")&&$("#navbutton").trigger("click"),$("html,body").css("overflow","hidden").css("height","100%"),document.body.addEventListener("touchmove",self.welcomeShowedListener,!1),e.style.display="block",t.style.display="block",1):(e.style.display="none",t.style.display="none",$("html,body").css("overflow","").css("height",""),document.body.removeEventListener("touchmove",self.welcomeShowedListener,!1),0)}searchFunc(path,"local-search-input","local-search-result");